---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="centos" tag="latest"
    - image="ubuntu" tag="latest"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "o3/sTyOl1R55GCKEdIdVORoRKOryCJObDUIPXxM5C7mXLY/qspfzeR+b+wrYFazcI0vQ6os+OzC8V1dzmhOTE8nT+atHqBjfttmIYvG6UAqaUnpuvEbe1oOZJ58GdPE68UZDxm/iZ+otBYWBaB3e26Ksl9ThLQI29fjht9xcwFgITrF2d0JDRN7mLoU4ct5lYZ1e+IOdpQNqNUSEdVxEIVg/ZnSYTlYsAN5pLJ2Eb8l42oVvR1GsGbu7RWVGnCe/Zums7IbWejsaTwY+jinZV2tvStiR1SVyFePblYrQAvbfhLolA4eLS5iU43qP0P3Nu7dPL7TzCheTltNlaFwVgMMlYG0qNJbcOvRwt1yMKPfuyvgep16pNnQUdWPfbZiSfnFZBaxDz7iJHhuPOfTthboi0sZcVl9psvcHkhrVBqY1lOrPKnQKmvBxbfHqgidrLSd118E/l1/7PdWcz58EsCTak8vmP/HtYjpy6Dc1Y63/Bnhiq8PFP6ruC9RjI1t+C36dCe3SCaD953rpT2/d4yVJTAvkgeo/pozu1gnt63eX47bpXFxlI6zgIIJiemdmv2JUMZrx5vmPEleK7P4rhzVG4EazzmgDZ2+3oG7k07RJ+n/jHul7tqBBO3kbFICp/zNMPp4YCbrzLns4a4B1AVCZnPbiHr8LKchYCcZTP7Y="
  email: false
